@page "/test-compare"
@rendermode InteractiveAuto

<PageTitle>Advanced Image Compare Demo</PageTitle>

<div class="container my-4">
    <h2 class="mb-4">
        <i class="bi bi-images"></i> Advanced Image Compare Component
    </h2>

    <div class="alert alert-info">
        <h5><i class="bi bi-stars"></i> Advanced Features:</h5>
        <ul class="mb-0">
            <li>✅ <strong>Angle Rotation:</strong> -45° to +45° angled cuts using CSS polygon</li>
            <li>✅ <strong>Orientation:</strong> Vertical (left-right) or Horizontal (top-bottom)</li>
            <li>✅ <strong>Direction:</strong> Normal or Reversed comparison</li>
            <li>✅ <strong>Drag Support:</strong> Mouse and touch for interactive sliding</li>
            <li>✅ <strong>Pure C# Blazor:</strong> Only 5 lines of JS helper</li>
        </ul>
    </div>

    <ImageCompare @ref="_compareRef"
        BeforeImage="https://picsum.photos/800/600?random=1"
        AfterImage="https://picsum.photos/800/600?random=2"
        BeforeLabel="Original"
        AfterLabel="Enhanced"
        InitialPosition="50"
        InitialAngle="0" />

    <div class="row mt-4">
        <div class="col-12">
            <div class="card">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0">
                        <i class="bi bi-terminal"></i> Test Controls
                    </h5>
                </div>
                <div class="card-body">
                    <div class="d-flex gap-2 flex-wrap">
                        <button class="btn btn-primary" @onclick="LoadNewImages">
                            <i class="bi bi-arrow-repeat"></i> Random Images
                        </button>
                        <button class="btn btn-secondary" @onclick="LoadNatureImages">
                            <i class="bi bi-tree"></i> Nature
                        </button>
                        <button class="btn btn-success" @onclick="LoadArchitectureImages">
                            <i class="bi bi-buildings"></i> Architecture
                        </button>
                        <button class="btn btn-info" @onclick="LoadUpscaleDemo">
                            <i class="bi bi-stars"></i> Upscale Demo
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row mt-4">
        <div class="col-md-6">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0"><i class="bi bi-code-square"></i> Basic Usage</h5>
                </div>
                <div class="card-body">
                    <pre class="bg-light p-3 rounded"><code>&lt;ImageCompare 
    BeforeImage="/path/to/before.jpg"
    AfterImage="/path/to/after.jpg"
    BeforeLabel="Original"
    AfterLabel="Enhanced"
    InitialPosition="50"
    InitialAngle="0" /&gt;</code></pre>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0"><i class="bi bi-gear"></i> Control Features</h5>
                </div>
                <div class="card-body">
                    <ul class="mb-0">
                        <li><strong>Position:</strong> 0-100% slider</li>
                        <li><strong>Angle:</strong> -45° to +45° rotation</li>
                        <li><strong>Orientation:</strong> Vertical ↔ Horizontal</li>
                        <li><strong>Direction:</strong> Normal ↔ Reversed</li>
                        <li><strong>Swap:</strong> Exchange images</li>
                        <li><strong>Drag:</strong> Interactive comparison</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <div class="row mt-4">
        <div class="col-12">
            <div class="card border-warning">
                <div class="card-header bg-warning">
                    <h5 class="mb-0"><i class="bi bi-lightbulb"></i> Tips</h5>
                </div>
                <div class="card-body">
                    <ul class="mb-0">
                        <li><strong>Try Angle Slider:</strong> Adjust angle while comparing for diagonal cuts</li>
                        <li><strong>Switch Orientation:</strong> Compare top-bottom instead of left-right</li>
                        <li><strong>Use Direction:</strong> Reverse which side shows before/after</li>
                        <li><strong>Drag on Image:</strong> Click and drag directly on the comparison area</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

@code {
    private ImageCompare? _compareRef;
    private int _counter = 3;

    private void LoadNewImages()
    {
        _compareRef?.UpdateImages(
            $"https://picsum.photos/800/600?random={_counter}",
            $"https://picsum.photos/800/600?random={_counter + 1}"
        );
        _counter += 2;
    }

    private void LoadNatureImages()
    {
        _compareRef?.UpdateImages(
            "https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=800",
            "https://images.unsplash.com/photo-1469474968028-56623f02e42e?w=800"
        );
    }

    private void LoadArchitectureImages()
    {
        _compareRef?.UpdateImages(
            "https://images.unsplash.com/photo-1518005020951-eccb494ad742?w=800",
            "https://images.unsplash.com/photo-1480714378408-67cf0d13bc1b?w=800"
        );
    }

    private void LoadUpscaleDemo()
    {
        // Simulate before/after upscale comparison
        _compareRef?.UpdateImages(
            "https://picsum.photos/400/300?random=50",  // Lower res
            "https://picsum.photos/800/600?random=50"   // Higher res
        );
    }
}

