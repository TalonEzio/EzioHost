@using EzioHost.WebApp.Client.Components
@using Microsoft.AspNetCore.Components.Sections
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <base href="/"/>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#f0f4ff',
                            100: '#e0e9ff',
                            200: '#c7d7fe',
                            300: '#a4b9fc',
                            400: '#8192f8',
                            500: '#6366f1',
                            600: '#4f46e5',
                            700: '#4338ca',
                            800: '#3730a3',
                            900: '#312e81',
                        }
                    }
                }
            }
        }
    </script>
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css" rel="stylesheet">
    <!-- SweetAlert2 for Toast -->
    <link href="https://cdn.jsdelivr.net/npm/sweetalert2@11.11.0/dist/sweetalert2.min.css" rel="stylesheet">


    <link rel="stylesheet" href="@Assets["app.css"]"/>
    <link rel="stylesheet" href="@Assets["EzioHost.WebApp.styles.css"]"/>
    <link rel="stylesheet" href="css/custom.css"/>
    <ImportMap/>
    <link rel="icon" type="image/png" href="favicon.png"/>

    <HeadOutlet/>
</head>

<body>
<Routes/>
<script src="_framework/blazor.web.js"></script>

<!-- Bootstrap JS removed - using Tailwind CSS -->
<script src="playerjs.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="js/image-compare-helper.js"></script>
<!-- HLS.js for .m3u8 video playback -->
<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
<!-- Chart.js for statistics charts -->
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
<script>
    const Toast = Swal.mixin({
        toast: true,
        position: "top-end",
        showConfirmButton: false,
        timer: 3000,
        timerProgressBar: true,
        didOpen: (toast) => {
            toast.onmouseenter = window.Swal.stopTimer;
            toast.onmouseleave = window.Swal.resumeTimer;
        }
    });

    window.showToast = function(type, message) {
        Toast.fire({
            icon: type, // 'success', 'error', 'info', 'warning', 'question'
            title: message
        });
    };

// Account dropdown toggle
    window.toggleAccountDropdown = function() {
        const dropdown = document.getElementById('account-dropdown');
        const chevron = document.getElementById('account-chevron');
        if (dropdown && chevron) {
            dropdown.classList.toggle('hidden');
            chevron.classList.toggle('rotate-180');
        }
    };

    window.closeAccountDropdown = function() {
        const dropdown = document.getElementById('account-dropdown');
        const chevron = document.getElementById('account-chevron');
        if (dropdown && chevron) {
            dropdown.classList.add('hidden');
            chevron.classList.remove('rotate-180');
        }
    };

// Close dropdown when clicking outside
    document.addEventListener('click',
        function(event) {
            const dropdown = document.getElementById('account-dropdown');
            const button = document.getElementById('account-dropdown-btn');
            if (dropdown && button && !dropdown.contains(event.target) && !button.contains(event.target)) {
                window.closeAccountDropdown();
            }
        });

// Close dropdown on navigation
    window.addEventListener('popstate',
        function() {
            window.closeAccountDropdown();
        });

// Close dropdown when Blazor navigates (using MutationObserver to detect route changes)
    if (window.Blazor) {
        const observer = new MutationObserver(function() {
            window.closeAccountDropdown();
        });

        // Observe the main content area for changes
        document.addEventListener('DOMContentLoaded',
            function() {
                const main = document.querySelector('main');
                if (main) {
                    observer.observe(main, { childList: true, subtree: true });
                }
            });
    }
</script>

<SectionOutlet SectionName="@SectionNames.FooterSection"></SectionOutlet>

</body>

</html>